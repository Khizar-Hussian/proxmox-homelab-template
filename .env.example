# ╔══════════════════════════════════════════════════════════════════════════════╗
# ║                    PROXMOX HOMELAB SECRETS CONFIGURATION                    ║
# ╚══════════════════════════════════════════════════════════════════════════════╝
#
# 🔒 SECURITY: Copy this file to .env and fill in your actual values
# ⚠️ WARNING: Never commit .env file to Git (already in .gitignore)
#
# 📝 USAGE: 
#   1. Copy: cp .env.example .env
#   2. Edit: nano .env (fill in your values)
#   3. Deploy: ./scripts/deploy.sh

# ══════════════════════════════════════════════════════════════════════════════
# 🏠 REQUIRED BASIC CONFIGURATION
# ══════════════════════════════════════════════════════════════════════════════

# Your domain name (must be managed by Cloudflare)
DOMAIN=yourdomain.com

# Admin email for certificates and notifications
ADMIN_EMAIL=admin@yourdomain.com

# Your Proxmox server IP address
PROXMOX_HOST=192.168.1.10

# Your home network configuration
MANAGEMENT_SUBNET=192.168.1.0/24
MANAGEMENT_GATEWAY=192.168.1.1

# Your NFS server IP (TrueNAS, Synology, etc.)
NFS_SERVER=192.168.1.20

# ══════════════════════════════════════════════════════════════════════════════
# 🔐 REQUIRED SECRETS
# ══════════════════════════════════════════════════════════════════════════════

# Proxmox API token (get from: Datacenter > Permissions > API Tokens)
# Format: user@pam!token_name=uuid-here
PROXMOX_TOKEN=root@pam!homelab=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# Cloudflare API token (get from: https://dash.cloudflare.com/profile/api-tokens)
# Permissions: Zone:Zone:Read, Zone:DNS:Edit, Zone:Zone Settings:Edit
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token_here

# Authentik admin password (choose a strong password)
AUTHENTIK_ADMIN_PASSWORD=your_secure_admin_password_here

# ══════════════════════════════════════════════════════════════════════════════
# 🌐 OPTIONAL EXTERNAL ACCESS
# ══════════════════════════════════════════════════════════════════════════════

# Cloudflare tunnel token (get from: https://dash.cloudflare.com/zero-trust/access/tunnels)
# Required for external access to services
CLOUDFLARE_TUNNEL_TOKEN=your_cloudflare_tunnel_token_here

# ══════════════════════════════════════════════════════════════════════════════
# 🔒 OPTIONAL VPN CONFIGURATION
# ══════════════════════════════════════════════════════════════════════════════

# Enable VPN gateway service
VPN_ENABLED=true

# VPN provider (nordvpn, surfshark, expressvpn, etc.)
VPN_PROVIDER=nordvpn

# VPN protocol (openvpn or wireguard)
VPN_PROTOCOL=openvpn

# VPN countries (comma-separated)
VPN_COUNTRIES="United States,Canada,Netherlands"

# ────────────────────────────────────────────────────────────────────────────
# OpenVPN Authentication (Username/Password)
# ────────────────────────────────────────────────────────────────────────────

# NordVPN OpenVPN credentials (get from: https://my.nordaccount.com/dashboard/nordvpn/)
# Go to Manual Setup → Set up NordVPN manually → OpenVPN → Service credentials
NORDVPN_USERNAME=your_nordvpn_service_username
NORDVPN_PASSWORD=your_nordvpn_service_password

# ────────────────────────────────────────────────────────────────────────────
# WireGuard Authentication (Private Key) - Alternative to OpenVPN
# ────────────────────────────────────────────────────────────────────────────

# NordVPN WireGuard private key (alternative to username/password)
# Get from: https://my.nordaccount.com/dashboard/nordvpn/ → Manual Setup → WireGuard
NORDVPN_PRIVATE_KEY=your_nordvpn_private_key_here

# ────────────────────────────────────────────────────────────────────────────
# VPN Security Settings
# ────────────────────────────────────────────────────────────────────────────

# Kill switch (blocks internet if VPN disconnects)
VPN_KILL_SWITCH=true

# DNS leak protection
VPN_DNS_LEAK_PROTECTION=true

# Firewall protection
VPN_FIREWALL_ENABLED=true

# Auto-reconnect on connection loss
VPN_AUTO_RECONNECT=true

# ────────────────────────────────────────────────────────────────────────────
# Services Using VPN (comma-separated)
# ────────────────────────────────────────────────────────────────────────────

# Services that should route through VPN for privacy
VPN_ROUTED_SERVICES="qbittorrent,jackett,sonarr,radarr"

# ══════════════════════════════════════════════════════════════════════════════
# 📊 OPTIONAL MONITORING & NOTIFICATIONS
# ══════════════════════════════════════════════════════════════════════════════

# Discord webhook URL for notifications
# Get from: Discord Server Settings > Integrations > Webhooks
DISCORD_WEBHOOK=https://discord.com/api/webhooks/your_webhook_url_here

# ══════════════════════════════════════════════════════════════════════════════
# 💾 OPTIONAL BACKUP ENCRYPTION
# ══════════════════════════════════════════════════════════════════════════════

# GPG key for backup encryption (generate with: gpg --gen-key)
BACKUP_ENCRYPTION_KEY=your_gpg_key_fingerprint_here

# ══════════════════════════════════════════════════════════════════════════════
# 🔐 OPTIONAL SSO PROVIDERS
# ══════════════════════════════════════════════════════════════════════════════

# Google OAuth (get from: https://console.cloud.google.com/apis/credentials)
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here

# GitHub OAuth (get from: https://github.com/settings/developers)
GITHUB_CLIENT_ID=your_github_client_id_here
GITHUB_CLIENT_SECRET=your_github_client_secret_here

# ══════════════════════════════════════════════════════════════════════════════
# ⚙️ OPTIONAL ADVANCED CONFIGURATION
# ══════════════════════════════════════════════════════════════════════════════

# Override default cluster name (default: homelab)
CLUSTER_NAME=homelab

# Override default timezone (default: America/New_York)
TIMEZONE=America/New_York

# Override default Proxmox settings
PROXMOX_API_PORT=8006
PROXMOX_STORAGE=local-lvm
PROXMOX_TEMPLATE=local:vztmpl/ubuntu-24.04-standard_24.04-2_amd64.tar.zst

# Override default network settings
MANAGEMENT_BRIDGE=vmbr0
CONTAINER_BRIDGE=vmbr1
CONTAINER_SUBNET=10.0.0.0/24
CONTAINER_GATEWAY=10.0.0.1

# Override default NFS paths
NFS_MEDIA_PATH=/mnt/tank/media
NFS_CONFIG_PATH=/mnt/tank/config
NFS_BACKUP_PATH=/mnt/tank/backups

# ══════════════════════════════════════════════════════════════════════════════
# 📝 SETUP INSTRUCTIONS
# ══════════════════════════════════════════════════════════════════════════════
#
# 1. PROXMOX TOKEN:
#    - Login to Proxmox web UI
#    - Go to: Datacenter > Permissions > API Tokens
#    - Click "Add" and create token for root@pam user
#    - Copy the full token string
#
# 2. CLOUDFLARE API TOKEN:
#    - Login to Cloudflare dashboard
#    - Go to: https://dash.cloudflare.com/profile/api-tokens
#    - Click "Create Token" > "Edit zone DNS" template
#    - Set Zone Resources to your domain
#    - Copy the generated token
#
# 3. CLOUDFLARE TUNNEL TOKEN:
#    - Go to: https://dash.cloudflare.com/zero-trust/access/tunnels
#    - Create a new tunnel
#    - Copy the tunnel token
#
# 4. AUTHENTIK ADMIN PASSWORD:
#    - Choose a strong password for the admin account
#    - This will be used to login to auth.yourdomain.com
#
# 5. DISCORD WEBHOOK (optional):
#    - Create a webhook in your Discord server
#    - Copy the webhook URL
#
# 6. NordVPN PRIVATE KEY (optional):
#    - Login to NordVPN account
#    - Go to NordLynx manual setup
#    - Generate private key